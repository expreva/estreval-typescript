{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["\n// const blob = new Blob([ workerScript ], { type: 'application/javascript' })\nconst listeners = {}\n\nlet worker\n\nfunction createWorker() {\n\n  // worker = new Worker(URL.createObjectURL(blob))\n  worker = new Worker('estreval-typescript-worker.js')\n\n  worker.onmessage = function (e) {\n\n    const { id, response, error, ast } = e.data\n\n    if (listeners[id]) {\n      clearTimeout(listeners[id].timer)\n      listeners[id].callback({ response, error, ast })\n      delete listeners[id]\n    }\n  }\n}\n\nexport function terminateWorker() {\n  if (worker) {\n    worker.terminate()\n    worker = null\n  }\n}\n\nexport function run(code, options = {}) {\n\n  const { timeout = 2000 } = options\n  if (!worker) createWorker()\n\n  return new Promise((resolve, reject) => {\n\n    const id = `${Date.now()}${Math.random()}`\n    const timer = setTimeout(function () {\n      terminateWorker()\n      delete listeners[id]\n      reject(new Error('Timed out'))\n    }, timeout)\n\n    listeners[id] = {\n      timer,\n      callback: resolve\n    }\n\n    worker.postMessage({\n      id,\n      request: {\n        code\n      }\n    })\n  })\n}\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,MAAM,YAAY,CAAC;AAEnB,MAAI;AAEJ,WAAS,eAAe;AAGtB,aAAS,IAAI,OAAO,+BAA+B;AAEnD,WAAO,YAAY,SAAU,GAAG;AAE9B,YAAM,EAAE,IAAI,UAAU,OAAO,IAAI,IAAI,EAAE;AAEvC,UAAI,UAAU,EAAE,GAAG;AACjB,qBAAa,UAAU,EAAE,EAAE,KAAK;AAChC,kBAAU,EAAE,EAAE,SAAS,EAAE,UAAU,OAAO,IAAI,CAAC;AAC/C,eAAO,UAAU,EAAE;AAAA,MACrB;AAAA,IACF;AAAA,EACF;AAEO,WAAS,kBAAkB;AAChC,QAAI,QAAQ;AACV,aAAO,UAAU;AACjB,eAAS;AAAA,IACX;AAAA,EACF;AAEO,WAAS,IAAI,MAAM,UAAU,CAAC,GAAG;AAEtC,UAAM,EAAE,UAAU,IAAK,IAAI;AAC3B,QAAI,CAAC;AAAQ,mBAAa;AAE1B,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEtC,YAAM,KAAK,GAAG,KAAK,IAAI,CAAC,GAAG,KAAK,OAAO,CAAC;AACxC,YAAM,QAAQ,WAAW,WAAY;AACnC,wBAAgB;AAChB,eAAO,UAAU,EAAE;AACnB,eAAO,IAAI,MAAM,WAAW,CAAC;AAAA,MAC/B,GAAG,OAAO;AAEV,gBAAU,EAAE,IAAI;AAAA,QACd;AAAA,QACA,UAAU;AAAA,MACZ;AAEA,aAAO,YAAY;AAAA,QACjB;AAAA,QACA,SAAS;AAAA,UACP;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;",
  "names": []
}
